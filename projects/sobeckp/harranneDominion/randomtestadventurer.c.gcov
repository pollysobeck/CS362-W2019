        -:    0:Source:randomtestadventurer.c
        -:    0:Graph:randomtestadventurer.gcno
        -:    0:Data:randomtestadventurer.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:// Author: Polly Sobeck
        -:    2:// Program: randomtestadventurer.c
        -:    3:// Date: 2/19/2019
        -:    4:// This program runs 1000 random tests for the 
        -:    5:// playAdventurer method in dominion.c. It randomly assigns
        -:    6:// values for currentPlayer, deckCount[currentPlayer], 
        -:    7:// handCount[currentPlayer], and discardCount[currentPlayer]
        -:    8:
        -:    9:#include "dominion.h"
        -:   10:#include "dominion_helpers.h"
        -:   11:#include <string.h>
        -:   12:#include <stdio.h>
        -:   13:#include <assert.h>
        -:   14:#include <stdlib.h>
        -:   15:#include "rngs.h"
        -:   16:#include <stdbool.h>
        -:   17:#include <time.h> 
        -:   18:
        -:   19:bool asserttrue(bool isTrue) {
     2997:   20:    return isTrue;
        -:   21:}
        -:   22:
        -:   23:void randomTestPlayAdventurer() {
     1998:   24:    srand(time(0)); 
        -:   25:    struct gameState G;
      999:   26:    int numPlayer = 2;
      999:   27:    int seed = 1000;    
        -:   28:    int r, currentPlayer, cardDrawn,
        -:   29:        initHandCount, endHandCount,
        -:   30:        initDeckCount, endDeckCount;
      999:   31:    int adventurerPos = 1;
      999:   32:    int coin_bonus = 0;
        -:   33:
      999:   34:    int k[10] = {adventurer, council_room, feast, gardens, mine, 
        -:   35:            remodel, smithy, village, baron, great_hall};
        -:   36:
      999:   37:        memset(&G, 23, sizeof(struct gameState));   // clear the game state
      999:   38:        r = initializeGame(numPlayer, k, seed, &G); // initialize a new game
        -:   39:        
        -:   40:        // Get random values for current player, player's deckCount, handCount, and discardCount
      999:   41:        currentPlayer = rand() % numPlayer;
      999:   42:        G.deckCount[currentPlayer] = rand() % 1000;
      999:   43:        G.handCount[currentPlayer] = rand() % 1000;
      999:   44:        G.discardCount[(currentPlayer == 0 ? 0 : 1)] = rand() % 1000;
        -:   45:
      999:   46:        initHandCount = G.handCount[currentPlayer];
      999:   47:        initDeckCount = G.deckCount[currentPlayer];
        -:   48:
        -:   49:        //playAdventurer(currentPlayer, &G);
      999:   50:        cardEffect(adventurer, -1, -1, -1, &G, adventurerPos, &coin_bonus);
        -:   51:
      999:   52:        endHandCount = G.handCount[currentPlayer];
      999:   53:        endDeckCount = G.deckCount[currentPlayer];
        -:   54:
        -:   55:        /* Test 1: Assert that the player's hand count increased by 2 (treasure cards) */
        -:   56:        /* All other cards drawn should have been discarded */
      999:   57:        printf("Test Player's Hand Count: %s\n", asserttrue((endHandCount - initHandCount) == 2) ? "pass" : "fail");
        -:   58:
        -:   59:        /* Test 2: Assert that the deck's count has decreased by at least 2 */
      999:   60:        printf("Test Deck Count: %s\n", asserttrue((initDeckCount - endDeckCount) >= 2) ? "pass" : "fail");
        -:   61:
        -:   62:        /* Test 2: Assert that the last drawn card is a treasure card*/
      999:   63:        cardDrawn = G.hand[currentPlayer][G.handCount[currentPlayer]-1];//top card of hand is most recently drawn card.
     3996:   64:        printf("Test Last Drawn Card: %s\n", asserttrue(cardDrawn == copper || cardDrawn == silver || cardDrawn == gold) ? "pass" : "fail");
        -:   65:
      999:   66:}
        -:   67:
        -:   68:int main() {
        1:   69:    printf("Random Tests for playAdventurer()...\n");
     2000:   70:    for (int i = 1; i < 1000; i++) {
      999:   71:        printf("Test %d\n", i + 1);
      999:   72:        randomTestPlayAdventurer();
      999:   73:        printf("\n");
      999:   74:    }
        1:   75:}
